# è”é€šç½‘ç›˜ç»Ÿä¸€æœåŠ¡éƒ¨ç½²è¯´æ˜

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Python 3.7+
- 2GB+ å†…å­˜
- ç½‘ç»œè¿æ¥

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®Token

ç¼–è¾‘ `tokens.json` æ–‡ä»¶ï¼š
```json
{
  "tokens": [
    {
      "token": "ä½ çš„è”é€šç½‘ç›˜Token",
      "name": "ä¸»Token",
      "is_active": true
    }
  ]
}
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘ç¯å¢ƒ
python simple_unified_service.py

# ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:8000 simple_unified_service:app
```

## ğŸ” ç™»å½•ä¿¡æ¯

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `3150261994`

## ğŸŒ è®¿é—®åœ°å€

- **ç®¡ç†ç•Œé¢**: http://localhost:8000
- **APIæœåŠ¡**: http://localhost:8000/api/

## ğŸ“‹ ä¸»è¦APIç«¯ç‚¹

### æ–‡ä»¶ä¸‹è½½
```bash
GET /api/download/?url=æ–‡ä»¶å¤¹å/æ–‡ä»¶å
```

### æ–‡ä»¶å¤¹åˆ—è¡¨
```bash
GET /api/folders
```

### æ–‡ä»¶åˆ—è¡¨
```bash
GET /api/files?folder=æ–‡ä»¶å¤¹å
```

### Tokenè·å–
```bash
GET /api/token/get
```

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒé…ç½®

### ä½¿ç”¨Nginxåå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### ä½¿ç”¨systemdæœåŠ¡

åˆ›å»º `/etc/systemd/system/wopan-service.service`:

```ini
[Unit]
Description=WoPan Unified Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/your/app
Environment=PATH=/path/to/your/venv/bin
ExecStart=/path/to/your/venv/bin/gunicorn -w 4 -b 127.0.0.1:8000 simple_unified_service:app
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl enable wopan-service
sudo systemctl start wopan-service
```

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: åœ¨ `simple_unified_service.py` ä¸­ä¿®æ”¹ `AUTH_CONFIG`
2. **ä½¿ç”¨HTTPS**: é…ç½®SSLè¯ä¹¦
3. **é˜²ç«å¢™**: åªå¼€æ”¾å¿…è¦ç«¯å£
4. **å®šæœŸæ›´æ–°**: ä¿æŒä¾èµ–åº“æœ€æ–°

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/wopan-service.log

# ä½¿ç”¨journalctlæŸ¥çœ‹systemdæ—¥å¿—
sudo journalctl -u wopan-service -f
```

### æ€§èƒ½ç›‘æ§
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- APIå“åº”æ—¶é—´
- Tokenä½¿ç”¨ç»Ÿè®¡

## ğŸ”„ æ›´æ–°éƒ¨ç½²

```bash
# 1. å¤‡ä»½é…ç½®
cp tokens.json tokens.json.bak

# 2. æ›´æ–°ä»£ç 
git pull  # æˆ–ä¸‹è½½æ–°ç‰ˆæœ¬

# 3. æ›´æ–°ä¾èµ–
pip install -r requirements.txt

# 4. é‡å¯æœåŠ¡
sudo systemctl restart wopan-service
```

## â“ å¸¸è§é—®é¢˜

### Q: Tokenå¤±æ•ˆæ€ä¹ˆåŠï¼Ÿ
A: åœ¨ç®¡ç†ç•Œé¢æ·»åŠ æ–°çš„æœ‰æ•ˆTokenï¼Œåˆ é™¤å¤±æ•ˆçš„Token

### Q: APIå“åº”æ…¢æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œè€ƒè™‘å¢åŠ Workerè¿›ç¨‹æ•°

### Q: å¿˜è®°ç™»å½•å¯†ç ï¼Ÿ
A: ä¿®æ”¹ `simple_unified_service.py` ä¸­çš„ `AUTH_CONFIG`

### Q: ç«¯å£è¢«å ç”¨ï¼Ÿ
A: ä¿®æ”¹å¯åŠ¨å‘½ä»¤ä¸­çš„ç«¯å£å·ï¼Œå¦‚ `-b 0.0.0.0:8001`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶
2. Tokenæœ‰æ•ˆæ€§
3. ç½‘ç»œè¿æ¥
4. ä¾èµ–åº“ç‰ˆæœ¬
